<div>
  <style>
    h1 {text-align: center;}
    h3 {text-align: center;}
    h6 {text-align: center;}
  </style>
  <div>
    <div class="image-container"><img src="<%= @the_itinerary.cover_image %>" class="cropped-image" alt="<%= @the_itinerary.name %> Image"></div>
    <p></p>
    <% owner_name = User.where({ :id => @the_itinerary.owner_id}).at(0).username %>
    <i><h3><%= owner_name %>'s Itinerary<h3></i>
    <h1>
      <%= @the_itinerary.name %>
    </h1>
    <h6>
      <%= @the_itinerary.caption %>
    </h6>

    <p><div class="activity-figures">
      <figure>
        <a href="/likes" target="_blank"><img src="https://cdn-icons-png.flaticon.com/512/58/58746.png" class="image-icon" alt="Likes"></a>
        <center><figcaption><%= @the_itinerary.likes_count %></figcaption></center>
      </figure>

      <figure>
        <img src="https://cdn.creazilla.com/icons/3250939/bookmark-icon-md.png" class="image-icon" alt="Bookmarks">
        <center><figcaption><%= @the_itinerary.bookmarks_count %></figcaption></center>
      </figure>
    </div></p>

    <center><dt>
      Created <%= time_ago_in_words(@the_itinerary.created_at) %> ago
    </dt></center>
  <hr>
</div>

<h3>
  Activities (<%= @the_itinerary.activities_count %>)
</h3>

<% act = Activity.where({ :itinerary_id => @the_itinerary.id}) %>
<% date_check = nil %>

<% act.order({ :time => :asc }).each do |an_activity| %>
  <% if date_check == an_activity.date %>
  <% else %>
    <% date_check = an_activity.date %>
    <b><center><p><div class="card" style="width: 35rem;">
      <div class="card-title">
        <p><i><h5><%= date_check.strftime("%A") %></h5></i>
        <h4><%= date_check.strftime("%B %e, %Y") %></h4></p>
      </div>
    </div></p><center></b>
<% end %>

  <center><div class="card" style="width: 35rem;">
    <div class="image-container">
      <img src="<%= an_activity.cover_image %>" class="card-img-top cropped-image" alt="<%= an_activity.name %> Image">
    </div>
    <div class="card-body">
      <h3 class="card-title"><%= an_activity.name %></h3>
      <h6 class="card-title"><%= an_activity.description %></h6>
      <p class="card-text"><%= an_activity.location %></p>
      <p class="card-text"><%= an_activity.rating %></p>
        <p><div class="activity-figures">
          <% an_activity.rating.times do %>
            <figure>
            <img src="https://cdn-icons-png.flaticon.com/512/8212/8212616.png" class="image-icon" alt="Stars">
            </figure>
          <% end %>
        </div></p>
      <div class="card-footer"> <%= an_activity.time.strftime("%k:%M %Z") %> </div>
    </div>
  </div></center>
<% end %>

<div>
  <!-- Button trigger modal -->
  <p><center><button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
    Edit itinerary
  </button></center>
  </p>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">Edit itinerary</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="/modify_itinerary/<%= @the_itinerary.id %>"  method="post" >
            <p><div>
              <label for="name_box">
                Name
              </label>

              <input type="text" id="name_box" name="query_name" value="<%= @the_itinerary.name %>">
            </div></</p>

            <p><div>
              <label for="caption_box">
                Caption
              </label>

              <input type="text" id="caption_box" name="query_caption" value="<%= @the_itinerary.caption %>">
            </div></p>

            <p><div>
              <label for="cover_image_box">
                Cover image link
              </label>

              <input type="text" id="cover_image_box" name="query_cover_image" value="<%= @the_itinerary.cover_image %>">
            </div></p>

            <p><div>
              <label for="location_box">
                Google Maps location link
              </label>

              <input type="text" id="location_box" name="query_location" value="<%= @the_itinerary.location %>">
            </div></p>

        </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

<hr>

<div>
        <a href="/delete_itinerary/<%= @the_itinerary.id %>">
          Delete itinerary
        </a>
</div>
